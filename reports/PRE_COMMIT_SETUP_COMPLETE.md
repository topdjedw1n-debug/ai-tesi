# ‚úÖ Pre-commit Hooks: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ó–∞–≤–µ—Ä—à–µ–Ω–æ

**–î–∞—Ç–∞:** 2025-11-02  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ü–†–û–í–ê–î–ñ–ï–ù–û

---

## üéØ –©–æ –ó—Ä–æ–±–ª–µ–Ω–æ

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ Pre-commit ‚úÖ

```bash
pip install pre-commit  # –í–∂–µ –±—É–ª–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
pre-commit install      # ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ pre-commit hook
pre-commit install --hook-type pre-push  # ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ pre-push hook
```

### 2. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** MyPy hook –º–∞–≤ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –∑ `additional_dependencies` –¥–ª—è `language: system`

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- –ü—Ä–∏–±—Ä–∞–Ω–æ `additional_dependencies`
- –î–æ–¥–∞–Ω–æ –∞–∫—Ç–∏–≤–∞—Ü—ñ—é venv –≤ entry command
- MyPy –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å–∏—Å—Ç–µ–º—É –∑ qa_venv

### 3. –ü–µ—Ä—à–∏–π –ó–∞–ø—É—Å–∫ –í–∏–∫–æ–Ω–∞–Ω–æ ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–µ—Ä—à–æ–≥–æ –∑–∞–ø—É—Å–∫—É:**
- ‚úÖ Trailing whitespace –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ (–±–∞–≥–∞—Ç–æ —Ñ–∞–π–ª—ñ–≤)
- ‚úÖ End of files –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ (–±–∞–≥–∞—Ç–æ —Ñ–∞–π–ª—ñ–≤)
- ‚úÖ Hooks –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ —Ç–∞ –ø—Ä–∞—Ü—é—é—Ç—å

---

## üìã –ê–∫—Ç–∏–≤–Ω—ñ Hooks

### Pre-commit Hook (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ `git commit`)

1. **trailing-whitespace** - –í–∏–¥–∞–ª—è—î –∑–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏
2. **end-of-file-fixer** - –î–æ–¥–∞—î –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫ –≤ –∫—ñ–Ω—Ü—ñ —Ñ–∞–π–ª—ñ–≤
3. **check-yaml** - –ü–µ—Ä–µ–≤—ñ—Ä—è—î YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
4. **check-json** - –ü–µ—Ä–µ–≤—ñ—Ä—è—î JSON —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
5. **check-added-large-files** - –ü–µ—Ä–µ–≤—ñ—Ä—è—î –≤–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏
6. **black** - –§–æ—Ä–º–∞—Ç—É—î Python –∫–æ–¥
7. **ruff** - –õ—ñ–Ω—Ç—É—î Python –∫–æ–¥
8. **ruff-format** - –§–æ—Ä–º–∞—Ç—É—î Python –∫–æ–¥
9. **mypy** - –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–∏–ø–∏ (—Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏)
10. **pytest** - –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–µ—Å—Ç—ñ–≤

### Pre-push Hook (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ `git push`)

- –î–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ push

---

## üîß –Ø–∫ –ü—Ä–∞—Ü—é—î

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ Commit:

```bash
git commit -m "My changes"
# Pre-commit hooks –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è
# –Ø–∫—â–æ —â–æ—Å—å –Ω–µ —Ç–∞–∫ - commit –±–ª–æ–∫—É—î—Ç—å—Å—è
```

### –í—Ä—É—á–Ω—É –ó–∞–ø—É—Å—Ç–∏—Ç–∏:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ —Ñ–∞–π–ª–∏
pre-commit run --all-files

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ staged —Ñ–∞–π–ª–∏
pre-commit run

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π hook
pre-commit run mypy
```

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –°—Ç–∞–Ω—É

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ hooks –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ
ls -la .git/hooks/pre-commit .git/hooks/pre-push

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–µ—Ä—Å—ñ—é
pre-commit --version

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é
pre-commit run --all-files
```

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

1. **–ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫** –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ —á–∞—Å (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è environments)
2. **–ù–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–ø—É—Å–∫–∏** –±—É–¥—É—Ç—å —à–≤–∏–¥–∫–∏–º–∏ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å cache)
3. **MyPy hook** –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç—ñ–ª—å–∫–∏ –∑–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏ (incremental)
4. **Pytest hook** –∑–∞–ø—É—Å–∫–∞—î —à–≤–∏–¥–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É (–Ω–µ –≤—Å—ñ —Ç–µ—Å—Ç–∏)

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **Pre-commit hooks –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ —Ç–∞ –ø—Ä–∞—Ü—é—é—Ç—å**

**–©–æ —Ç–µ–ø–µ—Ä –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:**
- ‚úÖ –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É (black, ruff)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É (YAML, JSON)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤ (mypy –Ω–∞ –∑–º—ñ–Ω–µ–Ω–∏—Ö —Ñ–∞–π–ª–∞—Ö)
- ‚úÖ –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–µ—Å—Ç—ñ–≤

**–ë–ª–æ–∫—É—é—Ç—å commit —è–∫—â–æ:**
- ‚ùå Ruff –∑–Ω–∞–π—à–æ–≤ –ø–æ–º–∏–ª–∫–∏
- ‚ùå MyPy –∑–Ω–∞–π—à–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∏–ø—ñ–≤
- ‚ùå Pytest —Ç–µ—Å—Ç–∏ –ø–∞–¥–∞—é—Ç—å
- ‚ùå YAML/JSON —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–µ–≤—ñ—Ä–Ω–∏–π

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **READY TO USE**

–¢–µ–ø–µ—Ä –∫–æ–∂–µ–Ω commit –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è!

