# –ó–≤—ñ—Ç –ø—Ä–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç—É —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó PROJECT_INSTRUCTION.md

**–î–∞—Ç–∞ –∞–Ω–∞–ª—ñ–∑—É:** 31 —Å—ñ—á–Ω—è 2025  
**–í–µ—Ä—Å—ñ—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:** 1.0  
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç—É:** MVP –≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ

---

## üìä –ó–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ

**–í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó: ~65%**

–ü—Ä–æ–µ–∫—Ç –º–∞—î –≥–∞—Ä–Ω—É –±–∞–∑–æ–≤—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∞–ª–µ –≤—ñ–¥—Å—É—Ç–Ω—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –¥–ª—è –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ–≥–æ MVP –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é.

---

## ‚úÖ –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

‚úÖ **–í—ñ–¥–ø–æ–≤—ñ–¥–∞—î —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ monorepo –∑ `apps/api` —Ç–∞ `apps/web`
- FastAPI backend –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—î—é (`app/api/v1`, `app/services`, `app/models`, `app/schemas`)
- Next.js frontend –∑ App Router
- PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è

‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –∫–æ–¥—É:**
- Type hints —É Python (`pyproject.toml` –∑ mypy –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏)
- TypeScript –∑ strict mode –Ω–∞ frontend
- Black, isort, ruff –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
- ESLint, Prettier –¥–ª—è frontend

‚úÖ **–ë–µ–∑–ø–µ–∫–∞:**
- CSRF middleware —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- Rate limiting –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è production
- Security audit logging

‚úÖ **AI Pipeline –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- ‚úÖ RAG —Å–∏—Å—Ç–µ–º–∞ (`RAGRetriever`) –∑ Semantic Scholar API
- ‚úÖ Prompt builder (`PromptBuilder`)
- ‚úÖ Citation formatter –ø—ñ–¥—Ç—Ä–∏–º—É—î APA, MLA, Chicago
- ‚úÖ Humanizer –¥–ª—è –∞–Ω—Ç–∏–¥–µ—Ç–µ–∫—Ü—ñ—ó
- ‚úÖ Section generator —ñ–Ω—Ç–µ–≥—Ä—É—î –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

‚úÖ **Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- ‚úÖ –§–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó (`GenerateSectionForm`) –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
- ‚úÖ Dashboard –∑—ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é
- ‚úÖ –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- ‚úÖ Responsive –¥–∏–∑–∞–π–Ω (Tailwind CSS)

‚úÖ **Backend endpoints:**
- ‚úÖ `/api/v1/auth/*` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- ‚úÖ `/api/v1/generate/outline` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–ª–∞–Ω—É
- ‚úÖ `/api/v1/generate/section` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ä–æ–∑–¥—ñ–ª—ñ–≤
- ‚úÖ `/api/v1/documents/*` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- ‚úÖ `/api/v1/admin/*` - –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

---

## ‚ùå –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### 1. –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç–∏ (Payment Integration)

**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**

**–ó–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é (—Ä–æ–∑–¥—ñ–ª 2.3):**
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Stripe –∞–±–æ Fondy
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: API endpoint `/api/v1/payment/create`
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: Webhook –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–ø–ª–∞—Ç–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –æ–ø–ª–∞—Ç–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: Frontend —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –æ–ø–ª–∞—Ç–∏

**–í–ø–ª–∏–≤:** –ë–µ–∑ –æ–ø–ª–∞—Ç–∏ –Ω–µ–º–æ–∂–ª–∏–≤–æ –º–æ–Ω–µ—Ç–∏–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–µ –∑–º–æ–∂—É—Ç—å –æ–ø–ª–∞—Ç–∏—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é —Ä–æ–±—ñ—Ç.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è MVP. –ü–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–æ.

---

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞–≥—ñ–∞—Ç—É (Plagiarism Check)

**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**

**–ó–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é (—Ä–æ–∑–¥—ñ–ª 2.6):**
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ PlagiarismSearch –∞–±–æ Copyleaks
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: API endpoint `/api/v1/plagiarism/check`
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–≤—ñ—Ç—É –≤ –ë–î
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: Frontend –¥–ª—è –ø–æ–∫–∞–∑—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**–í–ø–ª–∏–≤:** –û–¥–∏–Ω –∑ –∫–ª—é—á–æ–≤–∏—Ö –≤–∏–º–æ–≥ MVP - —Ä—ñ–≤–µ–Ω—å –ø–ª–∞–≥—ñ–∞—Ç—É ‚â§ 15%. –ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–µ–º–æ–∂–ª–∏–≤–æ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ —è–∫—ñ—Å—Ç—å.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—ñ—Å–ª—è —Å–∏—Å—Ç–µ–º–∏ –æ–ø–ª–∞—Ç–∏, –∞–ª–µ –¥–æ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É.

---

### 3. –ï–∫—Å–ø–æ—Ä—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ (Document Export)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û**

**–©–æ —î:**
- ‚úÖ API endpoint `/api/v1/documents/{id}/export/{format}` —ñ—Å–Ω—É—î
- ‚úÖ –ú–æ–¥–µ–ª—å `Document` –º–∞—î –ø–æ–ª—è `docx_path` —Ç–∞ `pdf_path`
- ‚úÖ –°—Ö–µ–º–∞ `ExportResponse` –≤–∏–∑–Ω–∞—á–µ–Ω–∞

**–©–æ –≤—ñ–¥—Å—É—Ç–Ω—î:**
- ‚ùå –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–µ—Ç–æ–¥—É `export_document()` –≤ `DocumentService` (grep –Ω–µ –∑–Ω–∞–π—à–æ–≤)
- ‚ùå –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è .docx —Ñ–∞–π–ª—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º
- ‚ùå –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è .pdf —Ñ–∞–π–ª—ñ–≤
- ‚ùå –ü—Ä–∞–≤–∏–ª—å–Ω–µ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è (—Ç–∏—Ç—É–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞, –∑–º—ñ—Å—Ç, —Ü–∏—Ç–∞—Ç–∏, —Å–ø–∏—Å–æ–∫ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∏)

**–ó–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é (—Ä–æ–∑–¥—ñ–ª 2.7):**
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: –ï–∫—Å–ø–æ—Ä—Ç —É .docx (python-docx) –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: –ï–∫—Å–ø–æ—Ä—Ç —É .pdf (ReportLab –∞–±–æ WeasyPrint)
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: –¢–∏—Ç—É–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞, –∑–º—ñ—Å—Ç, —Å–ø–∏—Å–æ–∫ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∏

**–í–ø–ª–∏–≤:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–µ –∑–º–æ–∂—É—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥–æ—Ç–æ–≤—É —Ä–æ–±–æ—Ç—É —É –ø–æ—Ç—Ä—ñ–±–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –µ–∫—Å–ø–æ—Ä—Ç—É.

---

### 4. –ü–æ–ª—è –≤ –º–æ–¥–µ–ª—è—Ö –¥–∞–Ω–∏—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—ñ–¥—Å—É—Ç–Ω—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–ª—è –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

**–í—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è –≤ `Document`:**
- ‚ùå `work_type` (bachelor/master/coursework) - –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é
- ‚ùå `citation_style` (APA/MLA/Chicago) - –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é
- ‚ùå `custom_sources` - –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–í–ø–ª–∏–≤:** –ù–µ–º–æ–∂–ª–∏–≤–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–∏–ø —Ä–æ–±–æ—Ç–∏ —Ç–∞ —Å—Ç–∏–ª—å —Ü–∏—Ç—É–≤–∞–Ω–Ω—è –≤ –ë–î.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –î–æ–¥–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –¥–ª—è –Ω–æ–≤–∏—Ö –ø–æ–ª—ñ–≤.

---

### 5. –ü—Ä–æ–º–ø—Ç–∏ –¥–ª—è AI

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ö–û–í–û –í–Ü–î–ü–û–í–Ü–î–ê–Æ–¢–¨**

**–ü–æ—Ç–æ—á–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏:**
- –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —î –≤ `PromptBuilder` —Ç–∞ `AIService._build_outline_prompt()`
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏ –Ω–µ –≤–∏–¥–Ω–æ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö
- –ù–µ–º–∞—î –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é

**–ó–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é (—Ä–æ–∑–¥—ñ–ª AI-–ø–∞–π–ø–ª–∞–π–Ω, –ö—Ä–æ–∫ 1):**
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: –¥–µ—Ç–∞–ª—å–Ω–∏–π –ø—Ä–æ–º–ø—Ç –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ –≤—Å—Ç—É–ø–æ–º (–∞–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å, –º–µ—Ç–∞, –∑–∞–≤–¥–∞–Ω–Ω—è, –æ–±'—î–∫—Ç, –ø—Ä–µ–¥–º–µ—Ç)
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: –†–æ–∑–¥—ñ–ª–∏ –∑ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª–∞–º–∏
- –ü–æ—Ç—Ä—ñ–±–Ω–æ: JSON —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑ –¥–µ—Ç–∞–ª—å–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é

**–ü–æ—Ç–æ—á–Ω–∏–π –ø—Ä–æ–º–ø—Ç** (`ai_service.py:285-317`) –∑–∞–Ω–∞–¥—Ç–æ –ø—Ä–æ—Å—Ç–∏–π:
- –ù–µ–º–∞—î —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó
- –ù–µ–º–∞—î –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –≤—Å—Ç—É–ø—É
- –ù–µ–º–∞—î –≤–∏–º–æ–≥ –¥–æ —Ñ–æ—Ä–º–∞—Ç—É JSON

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–º–ø—Ç–∏ –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é.

---

## üêõ –ó–Ω–∞–π–¥–µ–Ω—ñ –±–∞–≥–∏ —Ç–∞ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –í—ñ–¥—Å—É—Ç–Ω—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `export_document()`

**–§–∞–π–ª:** `apps/api/app/services/document_service.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `export_document()` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –≤ endpoint (`documents.py:185`), –∞–ª–µ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —É —Å–µ—Ä–≤—ñ—Å—ñ.

**–í–ø–ª–∏–≤:** Endpoint `/api/v1/documents/{id}/export/{format}` –≤–∏–∫–ª–∏—á–µ –ø–æ–º–∏–ª–∫—É 500.

**–ö–æ–¥:**
```python
# documents.py:185
result = await document_service.export_document(...)
# –ê–ª–µ –º–µ—Ç–æ–¥ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ DocumentService
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ `export_document()` —É `DocumentService`.

---

### 2. –ü–æ–º–∏–ª–∫–∞ –≤ `DocumentService.create_document()`

**–§–∞–π–ª:** `apps/api/app/services/document_service.py:52-56`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤.

**–ö–æ–¥:**
```python
await self.db.execute(
    update(Document)
    .where(Document.user_id == user_id)
    .values(total_documents_created=Document.total_documents_created + 1)
)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `Document.total_documents_created` - —Ü–µ –ø–æ–ª–µ –º–æ–¥–µ–ª—ñ, –∞ –Ω–µ —Ç–∞–±–ª–∏—Ü—ñ. –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å `User`, –∞–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –∫–æ–¥ (–±–æ –ø–æ–ª–µ –º–æ–∂–µ –Ω–µ —ñ—Å–Ω—É–≤–∞—Ç–∏).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–ª—è `total_documents_created` —É –º–æ–¥–µ–ª—ñ `User` –∞–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –∫–æ–¥.

---

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `time.time()` –∑–∞–º—ñ—Å—Ç—å `datetime`

**–§–∞–π–ª:** `apps/api/app/services/ai_service.py:143`

**–ö–æ–¥:**
```python
section.completed_at = time.time()  # ‚ùå –ü–æ–º–∏–ª–∫–∞: —Ü–µ float, –∞ –Ω–µ datetime
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `completed_at` –≤ –º–æ–¥–µ–ª—ñ `DocumentSection` –º–∞—î —Ç–∏–ø `DateTime`, –∞–ª–µ –ø—Ä–∏—Å–≤–æ—é—î—Ç—å—Å—è `float` (timestamp).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `datetime.utcnow()`:
```python
from datetime import datetime
section.completed_at = datetime.utcnow()
```

---

### 4. –ü—Ä–æ–±–ª–µ–º–∞ –≤ `AIService.get_user_usage()`

**–§–∞–π–ª:** `apps/api/app/services/ai_service.py:188-192`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø–∏—Ç –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–ª—è `Document.total_documents_created` —Ç–∞ `Document.total_tokens_used`, —è–∫—ñ –Ω–µ —ñ—Å–Ω—É—é—Ç—å —É –º–æ–¥–µ–ª—ñ `Document`.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ó–º—ñ–Ω–∏—Ç–∏ –ª–æ–≥—ñ–∫—É - —Ä–∞—Ö—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ –∞–≥—Ä–µ–≥–∞—Ü—ñ—é:
```python
from sqlalchemy import func
result = await self.db.execute(
    select(
        func.count(Document.id).label('total_documents'),
        func.sum(Document.tokens_used).label('total_tokens')
    ).where(Document.user_id == user_id)
)
```

---

### 5. –í—ñ–¥—Å—É—Ç–Ω—è –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —É `_call_ai_provider()`

**–§–∞–π–ª:** `apps/api/app/services/ai_service.py:207-219`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑ outline, –∞ –ª–∏—à–µ `content` —Ç–∞ `tokens_used`. –î–ª—è `generate_outline()` –ø–æ—Ç—Ä—ñ–±–µ–Ω JSON –∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é.

**–í–ø–ª–∏–≤:** `generate_outline()` –æ—á—ñ–∫—É—î `outline_data`, –∞–ª–µ –æ—Ç—Ä–∏–º—É—î –ª–∏—à–µ —Ç–µ–∫—Å—Ç.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –î–æ–¥–∞—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥ JSON —É `generate_outline()` –∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ AI.

---

### 6. –í—ñ–¥—Å—É—Ç–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è RAG —É –æ—Å–Ω–æ–≤–Ω–∏–π AI Service

**–ü—Ä–æ–±–ª–µ–º–∞:** `AIService` –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `SectionGenerator`, —è–∫–∏–π —ñ–Ω—Ç–µ–≥—Ä—É—î RAG, citations —Ç–∞ humanizer.

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:**
- `SectionGenerator` —ñ—Å–Ω—É—î —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä—É—î –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
- `AIService.generate_section()` –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `SectionGenerator`
- RAG –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ä–æ–∑–¥—ñ–ª—ñ–≤

**–í–ø–ª–∏–≤:** –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ä–æ–∑–¥—ñ–ª—ñ–≤ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä–µ–∞–ª—å–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞ –∑ Semantic Scholar, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ hallucinations.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ `SectionGenerator` —É `AIService.generate_section()`.

---

### 7. –í—ñ–¥—Å—É—Ç–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Ü–∏—Ç–∞—Ç

**–ó–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é (—Ä–æ–∑–¥—ñ–ª "–ü—Ä–æ–±–ª–µ–º–∞ 1"):**
- –ü–æ—Ç—Ä—ñ–±–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è `validate_citations()` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —â–æ –≤—Å—ñ —Ü–∏—Ç–∞—Ç–∏ —î —É —Å–ø–∏—Å–∫—É –¥–∂–µ—Ä–µ–ª

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ü–∏—Ç–∞—Ç –ø—ñ—Å–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ä–æ–∑–¥—ñ–ª—É.

---

## üìù –í—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç—ñ–≤

**–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≤–∏–º–∞–≥–∞—î (—Ä—è–¥–∫–∏ 639-698):**
- –î–µ—Ç–∞–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑ –≤—Å—Ç—É–ø–æ–º (–∞–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å, –º–µ—Ç–∞, –∑–∞–≤–¥–∞–Ω–Ω—è, –æ–±'—î–∫—Ç, –ø—Ä–µ–¥–º–µ—Ç)
- JSON —Ñ–æ—Ä–º–∞—Ç –∑ —á—ñ—Ç–∫–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
- –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∏–ø—ñ–≤ —Ä–æ–±—ñ—Ç (–±–∞–∫–∞–ª–∞–≤—Ä—Å—å–∫–∞, –º–∞–≥—ñ—Å—Ç–µ—Ä—Å—å–∫–∞, –∫—É—Ä—Å–æ–≤–∞)

**–ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
- –ü—Ä–æ—Å—Ç—ñ—à–∏–π –ø—Ä–æ–º–ø—Ç –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- –ê–Ω–≥–ª—ñ–π—Å—å–∫–∞ –º–æ–≤–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- –ù–µ–º–∞—î —Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó —Ä–æ–±—ñ—Ç

---

### 2. –ú–æ–¥–µ–ª—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü—ñ—ó

**–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:** –û–ø–ª–∞—Ç–∞ –∑–∞ —Ä–æ–±–æ—Ç—É (–±–µ–∑ –ø—ñ–¥–ø–∏—Å–æ–∫)

**–ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:** –ù–µ–º–∞—î —Å–∏—Å—Ç–µ–º–∏ –æ–ø–ª–∞—Ç–∏

---

### 3. Workflow –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

**–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –æ–ø–∏—Å—É—î:**
1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–ª–∞–Ω—É (–±–µ–∑ –æ–ø–ª–∞—Ç–∏) - ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
2. –ü–æ–∫–∞–∑ –ø–ª–∞–Ω—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É - ‚ö†Ô∏è –ß–∞—Å—Ç–∫–æ–≤–æ (–Ω–µ–º–∞—î frontend –¥–ª—è –ø–æ–∫–∞–∑—É)
3. –û–ø–ª–∞—Ç–∞ - ‚ùå –ù–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
4. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç—É –ø—ñ—Å–ª—è –æ–ø–ª–∞—Ç–∏ - ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è MVP

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç–∏** - Stripe/Fondy —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
2. ‚úÖ **–ï–∫—Å–ø–æ—Ä—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤** - –∑–∞–≤–µ—Ä—à–∏—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é .docx —Ç–∞ .pdf
3. ‚úÖ **–í–∏–ø—Ä–∞–≤–∏—Ç–∏ –±–∞–≥–∏** - –æ—Å–æ–±–ª–∏–≤–æ `export_document()` —Ç–∞ `time.time()` ‚Üí `datetime`

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–ª–∏–≤–æ)
4. ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞–≥—ñ–∞—Ç—É** - Copyleaks/PlagiarismSearch
5. ‚úÖ **–ü–æ–∫—Ä–∞—â–∏—Ç–∏ –ø—Ä–æ–º–ø—Ç–∏** - –¥–æ–¥–∞—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É, –¥–µ—Ç–∞–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É
6. ‚úÖ **–Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ RAG** - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `SectionGenerator` —É `AIService`

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3 (–ë–∞–∂–∞–Ω–æ)
7. ‚úÖ **–î–æ–¥–∞—Ç–∏ –ø–æ–ª—è –≤ –ë–î** - `work_type`, `citation_style`
8. ‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ü–∏—Ç–∞—Ç** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ hallucinations
9. ‚úÖ **Frontend –¥–ª—è –ø–ª–∞–Ω—É** - –ø–æ–∫–∞–∑ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –ø–ª–∞–Ω—É –ø–µ—Ä–µ–¥ –æ–ø–ª–∞—Ç–æ—é

---

## üìä –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è | –ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è | –°—Ç–∞—Ç—É—Å |
|-----------|------------|-------------------|---------|
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É | ‚úÖ | ‚úÖ | –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î |
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è | ‚úÖ | ‚úÖ | –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î |
| –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–ª–∞–Ω—É | ‚úÖ | ‚úÖ | –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î |
| RAG —Å–∏—Å—Ç–µ–º–∞ | ‚úÖ | ‚úÖ | –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î |
| Citation formatter | ‚úÖ | ‚úÖ | –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î |
| Humanizer | ‚úÖ | ‚úÖ | –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î |
| –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç–∏ | ‚úÖ | ‚ùå | **–í—ñ–¥—Å—É—Ç–Ω—è** |
| –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞–≥—ñ–∞—Ç—É | ‚úÖ | ‚ùå | **–í—ñ–¥—Å—É—Ç–Ω—è** |
| –ï–∫—Å–ø–æ—Ä—Ç .docx/.pdf | ‚úÖ | ‚ö†Ô∏è | –ß–∞—Å—Ç–∫–æ–≤–æ |
| –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å | ‚úÖ | ‚úÖ | –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î |
| –ü—Ä–æ–º–ø—Ç–∏ (–¥–µ—Ç–∞–ª—ñ) | ‚úÖ | ‚ö†Ô∏è | –ß–∞—Å—Ç–∫–æ–≤–æ |
| Workflow (–æ–ø–ª–∞—Ç–∞) | ‚úÖ | ‚ùå | –ù–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î |

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

–ü—Ä–æ–µ–∫—Ç –º–∞—î **–º—ñ—Ü–Ω—É —Ç–µ—Ö–Ω—ñ—á–Ω—É –æ—Å–Ω–æ–≤—É** —Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É, –∞–ª–µ **–≤—ñ–¥—Å—É—Ç–Ω—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –¥–ª—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü—ñ—ó** (–æ–ø–ª–∞—Ç–∞) —Ç–∞ **–≥–∞—Ä–∞–Ω—Ç—ñ—ó —è–∫–æ—Å—Ç—ñ** (–ø–ª–∞–≥—ñ–∞—Ç, –µ–∫—Å–ø–æ—Ä—Ç).

**–û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:**
1. –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–∏–π–Ω—è—Ç—Ç—è –æ–ø–ª–∞—Ç–∏ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
2. –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥–æ—Ç–æ–≤–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
3. –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ –ø–ª–∞–≥—ñ–∞—Ç
4. –î–µ—è–∫—ñ –±–∞–≥–∏, —â–æ –∑–∞–≤–∞–∂–∞—é—Ç—å —Ä–æ–±–æ—Ç—ñ

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –¥—ñ–π:**
1. –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ –±–∞–≥–∏ (export_document, time.time)
2. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –æ–ø–ª–∞—Ç–∏
3. –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –µ–∫—Å–ø–æ—Ä—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
4. –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ø–ª–∞–≥—ñ–∞—Ç—É
5. –ü–æ–∫—Ä–∞—â–∏—Ç–∏ –ø—Ä–æ–º–ø—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ RAG

**–û—Ü—ñ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ –¥–æ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É: 40%**

–ü—Ä–æ–µ–∫—Ç –ø–æ—Ç—Ä–µ–±—É—î —â–µ 2-3 —Ç–∏–∂–Ω—ñ —Ä–æ–±–æ—Ç–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è MVP –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é.

